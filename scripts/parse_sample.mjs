import { parseIGM } from '../src/utils/igmParser.js';
import { createErrorCollector } from '../src/utils/helpers.js';

const sample = `HRECZZAAACO2555KCSA009ZZINCCU1ICES1_5PSACHI01102892202511251220
<manifest>
<vesinfo>
FINCCU111109313E8800011EOSLAAACO2555KCAPT.INCCU1SGSINC1GENERAL25112025 00:00NNNNNINCCU1KKP1
<END-vesinfo>
<cargo>
FINCCU111109313E8800011E1300PKGCCU11313721112025MYPKGINCCU1BASF INDIA LIMITEDTHE 10TH FLOOR GODREJ ONE PIROJSHANAGAR VIKHROLI EAST UNIT NO 10A10B & 10C PART 400079 MUMBAI INDIANALCO WATER INDIA PRIVATE LIMITED1 LENIN SARANI KONNAGAR712235 HOOGHLYINDIACOTLCINCCU1CIL11PKG23750.000KGSNM1X20 ISOTANK CONTAINER  STC 20160 KGS OF OXOOIL  800 HS CODE 38249900 IEC  0388007257 GST  27AAACB4599E1ZL NOTIFY  PAN AAACO4994NZZZZZZZZ2002381468RAAACO2555K
<END-cargo>
<contain>
FINCCU111109313E8800011E1300EOLU8227111C0212891AAACO2555KFCL123.752270N
<END-contain>
<END-manifest>
TREC102892`;

const { collector, addError } = createErrorCollector();
const parsed = parseIGM(sample, addError);
console.log(JSON.stringify({ cargos: parsed.cargos, containers: parsed.containers, errors: collector }, null, 2));
